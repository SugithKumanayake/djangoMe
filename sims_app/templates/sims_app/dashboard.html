{% load static %}
{% load compress %}
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <title>Dashboard</title>

  <link rel="stylesheet" href="{% static 'sims_app/css/themify-icons.css' %}">
  <link rel="stylesheet" href="{% static 'sims_app/css/vendor.bundle.base.css' %}">
  <link rel="stylesheet" href="{% static 'sims_app/css/style.css' %}">
  
  {% compress css %}
    <link type="text/x-scss" href="{% static 'style.scss' %}" rel="stylesheet" media="screen">
  {% endcompress %}

</head>
<body>
  <div class="container-scroller">
      {% include 'sims_app/navbar.html' %}
      <div class="container-fluid page-body-wrapper">
          {% include 'sims_app/sidebar.html' %}
        <div class="main-panel">
            <div class="content-wrapper">
              <div class="row">
                <div class="col-md-12 grid-margin">
                  <div class="d-flex justify-content-between align-items-center">
                    <div>
                      <h4 class="font-weight-bold mb-0">SIMS Dashboard </h4>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-md-3 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title text-md-center text-xl-left">Students</p>
                      <div class="d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center">
                        <h3 class="mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0">{{student_count}}</h3>
                        <i class="ti-user icon-md text-muted mb-0 mb-md-3 mb-xl-0"></i>
                      </div>  
                      <p class="mb-0 mt-2 text-success">{{male_count}}<span class="text-black ms-1"><small> Male | </small></span>
                     {{female_count}}<span class="text-black ms-1"><small> Female</small></span></p>
                     
                    </div>
                  </div>
                </div>
                <div class="col-md-3 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title text-md-center text-xl-left">New Registrations</p>
                      <div class="d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center">
                        <h3 class="mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0">{{reg_count_month}}</h3>
                        <i class="ti-briefcase icon-md text-muted mb-0 mb-md-3 mb-xl-0"></i>
                      </div>  
                      <p class="mb-0 mt-2 text-success"> {{reg_count}} <span class="text-black ms-1"><small> Total</small></span></p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title text-md-center text-xl-left">New Payments</p>
                      <div class="d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center">
                        <h3 class="mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0">{{payments_month}}</h3>
                        <i class="ti-credit-card icon-md text-muted mb-0 mb-md-3 mb-xl-0"></i>
                      </div>  
                      <p class="mb-0 mt-2 text-success">{{payments_total}}<span class="text-black ms-1"><small> Total</small></span></p>
                    </div>
                  </div>
                </div>
                <div class="col-md-3 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title text-md-center text-xl-left">Courses</p>
                      <div class="d-flex flex-wrap justify-content-between justify-content-md-center justify-content-xl-between align-items-center">
                        <h3 class="mb-0 mb-md-2 mb-xl-0 order-md-1 order-xl-0">{{course_count}}</h3>
                        <i class="ti-layers-alt icon-md text-muted mb-0 mb-md-3 mb-xl-0"></i>
                      </div>  
                      <p class="mb-0 mt-2 text-success"> <span class="text-black ms-1"><small>Total Courses</small></span></p>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title mb-0">Top Courses</p>
                      <div class="table-responsive">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                             
                              <th>Course</th>
                              <th>Payments</th>
                           
                            </tr>
                          </thead>
                          <tbody>
                            {% for i in top_courses %}
                            <tr>
                           
                              <td>{{i.course__cname}}</td>
                              <td class="text-dark"> {{i.total}} </td>
                           
                            </tr>
                            {% endfor %}
                           
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
                <div class="col-md-6 grid-margin stretch-card">
                  <div class="card">
                    <div class="card-body">
                      <p class="card-title mb-0">Top Students</p>
                      <div class="table-responsive">
                        <table class="table table-hover">
                          <thead>
                            <tr>
                          
                              <th>Student</th>
                              <th>Payments</th>
                            
                            </tr>
                          </thead>
                          <tbody>
                            {% for i in top_students %}
                            <tr>
                           
                              <td>{{i.student__fname}} {{i.student__lname}}</td>
                              <td class="text-dark"> {{i.total}} </td>
                           
                            </tr>
                            {% endfor %}
                          </tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              <div class="row">
                <div class="col-md-16 grid-margin stretch-card">
                  <div class="card card-outline-primary">
                    <div class="card-body">
                      <p class="card-title">Student Leaderboard</p>
                      <div class="row">
                        <div class="col-md-12 col-xl-3 d-flex flex-column justify-content-center">
                          <div class="ml-xl-4">
                            <h4 class="font-semibold mb-xl-4 text-center">Best Performer</h3>
                            <img class="img-fluid mb-xl-4" src="static/images/{{best_performer.student__profile_pic}}">
                            <h4 class="font-semibold mb-xl-4 text-center">{{best_performer.student__fname}} {{best_performer.student__lname}}</h2>
                            
                          </div>  
                        </div>
                        <div class="col-md-12 col-xl-9">
                          <div class="row">
                            <div class="card">
                              <div class="card-body">
                           
                              <div class="table-responsive">
                                <table class="table report-table">
                                  <tr>
                                    <th> </th>
                                    <th>Student</th>
                                    <th>Total Marks</th>
                                    <th>Completed Exams</th>
                                  
                                  </tr>
                                  {% for i in students_performance %}
                                  <tr>
                                    <td>
                                      <img src="images/{{i.student__profile_pic}}"> 
                                    </td>
                                    <td> 
                                      <h5 class="font-weight-bold">
                                       {{i.student__fname}} {{i.student__lname}}
                                      </h5>
                                    </td>
                                    
                                    <td>
                                      <h5 class="font-weight-bold text-lg-center mb-0">
                                        {{i.total}}
                                      </h5>
                                    </td>

                                    <td>
                                      <h5 class="font-weight-bold text-lg-center mb-0">
                                        {{i.exam_count}}
                                      </h5>
                                    </td>
                                  </tr>
                                  {% endfor %}
                                </table>
                              </div>
                            </div>
                           
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
           </div>
           <footer class="footer">
            <div class="d-sm-flex justify-content-center">
              <span class="text-muted text-center text-sm-left d-block d-sm-inline-block">Developed By Sugith Kumanayake | Clavein Web 2023 </span>
            </div>
          </footer> 
      </div>
    </div>
  </div>
  {{ redirect_to_login_immediately }}
</body>
<script src="{% static 'sims_app/js/vendor.bundle.base.js' %}"></script>
<script src="{% static 'sims_app/js/hoverable-collapse.js' %}"></script>
<script src="{% static 'sims_app/js/off-canvas.js' %}"></script>
<script src="{% static 'sims_app/js/jquery.cookie.js'  %}" type="text/javascript"></script>
<script src="{% static 'sims_app/js/template.js' %}"></script>
<script src="{% static 'sims_app/js/dashboard.js' %}"></script>
</html>